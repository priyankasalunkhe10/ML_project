<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Flight Price Predictor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
  body {
    font-family: 'Inter', sans-serif;
  }
  #loading {
    display: none;
    position: fixed;
    z-index: 999;
    width: 100%;
    height: 100%;
    background-color: rgba(255,255,255,0.8);
    text-align: center;
    top: 0;
    left: 0;
  }
  .spinner-border {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -1rem;
    margin-left: -1rem;
  }



    .step {
      display: none;
      animation: fadeIn 0.5s ease-in-out;
    }
    .step.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .airline-option input[type="radio"] {
      display: none;
    }
    .airline-option img {
      width: 100px;
      height: 60px;
      border: 3px solid transparent;
      border-radius: 10px;
      transition: transform 0.3s, border-color 0.3s;
    }
    .airline-option input:checked + img {
      border-color: #0d6efd;
      transform: scale(1.05);
    }
    .airline-label {
      display: inline-block;
      margin: 10px;
      text-align: center;
      cursor: pointer;
    }
  </style>
  <script>
    let currentStep = 0;
    function showStep(n) {
      const steps = document.getElementsByClassName("step");
      for (let i = 0; i < steps.length; i++) {
        steps[i].classList.remove("active");
      }
      steps[n].classList.add("active");
    }
    function nextStep() {
      currentStep++;
      showStep(currentStep);
    }
    function prevStep() {
      currentStep--;
      showStep(currentStep);
    }
    window.onload = () => showStep(0);
  </script>
</head>
<body class="bg-light">

  <div class="container mt-5">
    <div class="card shadow-lg p-4">
      <h2 class="text-center mb-4">âœˆ Flight Price Predictor</h2>
      <form method="POST" action="/predict">

        <!-- Step 1: Select Airline -->
        <div class="step active">
          <h4>Select Airline</h4>
          <div class="d-flex flex-wrap justify-content-center">
            <label class="airline-label">
              <input type="radio" name="airline" value="Air India" required>
              <img src="https://1000logos.net/wp-content/uploads/2021/05/Air-India-logo.png">
              <div>Air India</div>
            </label>
            <label class="airline-label">
              <input type="radio" name="airline" value="IndiGo">
              <img src="https://upload.wikimedia.org/wikipedia/commons/9/92/IndiGo_Logo.svg">
              <div>IndiGo</div>
            </label>
            <label class="airline-label">
              <input type="radio" name="airline" value="SpiceJet">
              <img src="https://companieslogo.com/img/orig/SPICEJET.NS_BIG-4a75c41f.png">
              <div>SpiceJet</div>
            </label>
            <label class="airline-label">
              <input type="radio" name="airline" value="Vistara">
              <img src="https://upload.wikimedia.org/wikipedia/commons/0/01/Vistara_Logo.png">
              <div>Vistara</div>
            </label>
          </div>
          <div class="text-end mt-4">
            <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
          </div>
        </div>

        <!-- Step 2: Source -->
        <div class="step">
          <h4>Select Source City</h4>
          <select class="form-select" name="source" required>
            <option value="">-- Select Source --</option>
            <option value="Delhi">Delhi</option>
            <option value="Mumbai">Mumbai</option>
            <option value="Chennai">Chennai</option>
            <option value="Kolkata">Kolkata</option>
            <option value="Banglore">Banglore</option>
          </select>
          <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
            <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
          </div>
        </div>

        <!-- Step 3: Destination -->
        <div class="step">
          <h4>Select Destination City</h4>
          <select class="form-select" name="destination" required>
            <option value="">-- Select Destination --</option>
            <option value="Cochin">Cochin</option>
            <option value="Delhi">Delhi</option>
            <option value="Hyderabad">Hyderabad</option>
            <option value="New Delhi">New Delhi</option>
            <option value="Kolkata">Kolkata</option>
            <option value="Banglore">Banglore</option>
          </select>
          <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
            <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
          </div>
        </div>

        <!-- Step 4: Flight Details -->
        <div class="step">
          <h4>Enter Flight Details</h4>
          <div class="mb-3">
            <label>Date of Journey</label>
            <input type="date" class="form-control" name="journey_date" required>
          </div>
          <div class="mb-3">
            <label>Departure Time</label>
            <input type="time" class="form-control" name="dep_time" required>
          </div>
        
          <input type="hidden" name="stops" id="stops_input">

        <!-- Displayed to user -->
        <div class="mb-3">
            <label>Estimated Stops</label>
            <input type="text" id="stops_display" class="form-control" readonly>
        </div>
        
          <!-- Spinner -->
        <div id="spinner" class="text-center my-4" style="display: none;">
         <div class="spinner-border text-primary" role="status">
         <span class="visually-hidden">Predicting...</span>
        </div>
        <p class="mt-2">Predicting Price...</p>
        </div>

        <!-- Buttons -->
        <div class="d-flex justify-content-between mt-4">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
        <button type="submit" class="btn btn-success" onclick="showLoader()">Predict Price</button>
        </div>

        </div>

      </form>
    </div>
  </div>
<div id="loading">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="mt-3">Predicting your fare, please wait...</p>
</div>

<script>
  const form = document.querySelector("form");
  form.addEventListener("submit", function () {
    document.getElementById("loading").style.display = "block";
  });
</script>
<script>
  const stopsMap = {
    "Delhi-Cochin": "1 stop",
    "Mumbai-Delhi": "non-stop",
    "Kolkata-Banglore": "2 stops",
    "Chennai-Hyderabad": "non-stop",
    "Delhi-Banglore": "1 stop",
    "Delhi-Mumbai": "non-stop",
    "Mumbai-Cochin": "2 stops",
    "Chennai-Delhi": "1 stop"
    // Add more here as needed
  };

  function updateStops() {
    const source = document.querySelector("select[name='source']").value;
    const dest = document.querySelector("select[name='destination']").value;

    const routeKey = `${source}-${dest}`;
    const stops = stopsMap[routeKey] || "1 stop"; // default fallback

    document.getElementById("stops_display").value = stops;
    document.getElementById("stops_input").value = stops;
  }

  // Attach event listeners
  document.querySelector("select[name='source']").addEventListener("change", updateStops);
  document.querySelector("select[name='destination']").addEventListener("change", updateStops);
</script>


</body>
</html>

